

<!DOCTYPE html>
<html class="writer-html5" lang="ZH-CN" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>11.5 【代码美化】写出漂亮 Python 代码的 20条准则 &mdash; lzk365 0.1 文档</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="11.6 【代码美化】择优选择 EAFP 和 LBYL 代码风格" href="c11_06.html" />
    <link rel="prev" title="11.4 【代码美化】Pythonic 代码的 15 个案例" href="c11_04.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> lzk365
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p01.html">第一章：1-10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p02.html">第二章：11-20</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p03.html">第三章：21-30</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p04.html">第四章：31-40</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p05.html">第五章：41-50</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p06.html">第六章：51-60</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p07.html">第七章：61-70</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p08.html">第八章：71-80</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p09.html">第九章：81-90</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p10.html">第十章：91-100</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/p11.html">第十一章：101-110</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="c11_01.html">11.1 【代码美化】如何更好进行变量的命名？</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_02.html">11.2 【代码美化】写好函数的 6 个建议</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_03.html">11.3 【代码美化】自觉遵守 PEP8 代码风格</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_04.html">11.4 【代码美化】Pythonic 代码的 15 个案例</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11.5 【代码美化】写出漂亮 Python 代码的 20条准则</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python">1. Python 之禅？</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">2. 优美胜于丑陋</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">3. 明了胜于晦涩</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">4. 简单胜于复杂</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">5. 复杂胜于晦涩</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">6. 扁平胜于嵌套</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">7. 间隔胜于紧凑</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">8. 可读性很重要</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">9. 特例不足以特殊到违背这些原则</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">10. 实用性胜过纯粹</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">11. 永远不要默默地忽视错误</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">12. 除非明确需要这样做</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">13. 面对模棱两可，拒绝猜测</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">14. 解决问题最直接的方法应该有一种，最好只有一种</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">15. 当然这是没法一蹴而就的，除非你是荷兰人</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">16. 做也许好过不做</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">17. 不想就做还不如不做</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">18. 如果解决方案难以解释清楚，那一定很糟糕</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">19. 如果实现容易描述，那可能是个好方案</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">20. 命名空间是一种绝妙的理念，多加利用！</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="c11_06.html">11.6 【代码美化】择优选择 EAFP 和 LBYL 代码风格</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_07.html">11.7 【代码美化】使用 flake8 保证代码风格</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_08.html">11.7 【代码美化】使用 flake8 保证代码风格</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_09.html">11.7 【代码美化】使用 flake8 保证代码风格</a></li>
<li class="toctree-l2"><a class="reference internal" href="c11_10.html">11.7 【代码美化】使用 flake8 保证代码风格</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p12.html">第十二章：111-120</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p13.html">第十三章：121-130</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p14.html">第十四章：131-140</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p15.html">第十五章：141-150</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p16.html">第十六章：151-160</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p17.html">第十七章：161-170</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p18.html">第十八章：171-180</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p19.html">第十九章：181-190</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p20.html">第二十章：191-200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p21.html">第二十一章：201-210</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p22.html">第二十二章：211-220</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p23.html">第二十三章：221-230</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p24.html">第二十四章：231-240</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p25.html">第二十五章：241-250</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p26.html">第二十六章：251-260</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p27.html">第二十七章：261-270</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p28.html">第二十八章：271-280</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p29.html">第二十九章：281-290</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p30.html">第三十章：291-300</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p31.html">第三十一章：301-310</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p32.html">第三十二章：311-320</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p33.html">第三十三章：321-330</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p34.html">第三十四章：331-340</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p35.html">第三十五章：341-350</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/p36.html">第三十六章：351-360</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">lzk365</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/p11.html">第十一章：101-110</a> &raquo;</li>
        
      <li>11.5 【代码美化】写出漂亮 Python 代码的 20条准则</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/c11/c11_05.rst.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="python-20">
<h1>11.5 【代码美化】写出漂亮 Python 代码的 20条准则<a class="headerlink" href="#python-20" title="此标题的永久链接">¶</a></h1>
<p>通常，当我们在学校学习时，编程美学不是一个关键问题。用 Python
写代码时，个人也会遵循自己的风格。然而，当我们必须花大把时间来理解一个人的隐式代码时，这项工作肯定不受欢迎，这种情况同样可能发生在别人阅读我们的代码时。所以，让我们聚焦
Python 之禅和一些改进技巧，从而解决问题。</p>
<section id="python">
<h2>1. Python 之禅？<a class="headerlink" href="#python" title="此标题的永久链接">¶</a></h2>
<p>对于此前没听说过的人，请在 Python
解释器中键入并执行<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">this</span></code>，会出现由 Tim Peters 撰写的 19
条指导原则：</p>
<ol class="arabic simple">
<li><p>优美胜于丑陋；</p></li>
<li><p>明了胜于晦涩；</p></li>
<li><p>简单胜于复杂；</p></li>
<li><p>复杂胜于晦涩；</p></li>
<li><p>扁平胜于嵌套；</p></li>
<li><p>间隔胜于紧凑；</p></li>
<li><p>可读性很重要；</p></li>
<li><p>特例不足以特殊到违背这些原则；</p></li>
<li><p>实用性胜过纯粹；</p></li>
<li><p>永远不要默默地忽视错误；</p></li>
<li><p>除非明确需要这样做；</p></li>
<li><p>面对模棱两可，拒绝猜测；</p></li>
<li><p>解决问题最直接的方法应该有一种，最好只有一种；</p></li>
<li><p>当然这是没法一蹴而就的，除非你是荷兰人；</p></li>
<li><p>做也许好过不做；</p></li>
<li><p>但不想就做还不如不做；</p></li>
<li><p>如果方案难以描述明白，那么一定是个糟糕的方案；</p></li>
<li><p>如果实现容易描述，那可能是个好方案；</p></li>
<li><p>命名空间是一种绝妙的理念，多加利用！</p></li>
</ol>
<p>在这篇文章中，我将分享自己对这些格言的理解以及我学到的一些有用的 Python
技巧。</p>
</section>
<section id="id1">
<h2>2. 优美胜于丑陋<a class="headerlink" href="#id1" title="此标题的永久链接">¶</a></h2>
<p>Python 具有语法简单、代码可读性强和命令类似英语等特点，这让编写 Python
代码比使用其他编程语言更容易、更高效。例如，使用<code class="docutils literal notranslate"><span class="pre">or</span></code>
<code class="docutils literal notranslate"><span class="pre">and</span></code>和<code class="docutils literal notranslate"><span class="pre">||</span> <span class="pre">&amp;&amp;</span></code>构建语义相同的表达式：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># &amp;&amp;, ||</span>
<span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>

<span class="c1"># and, or</span>
<span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">c</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>

<span class="c1"># 这两个逻辑表达式在 Python 中是相同的</span>
<span class="c1"># 从语义的角度来看，可以使用选择操作符来构造完全相同的表达式。</span>
</pre></div>
</div>
<p>此外，代码的布局和组成非常重要，有大量资源涉及这个主题。下面是最受欢迎也是我最喜欢的一个：PEP
8——Python 代码风格指南。</p>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">https://www.python.org/dev/peps/pep-0008/</a></p>
<p>浏览完 PEP8 后，看看下面这些文章，其中展示了一些亮点和应用：</p>
<ul>
<li><p>如何参照 PEP 8 编写漂亮的 Python 代码</p>
<p><a class="reference external" href="https://realpython.com/python-pep8/">https://realpython.com/python-pep8/</a></p>
</li>
<li><p>优雅的 Python 与 PEP8</p>
<p><a class="reference external" href="https://medium.com/&#64;mariasurmenok/stylish-python-with-pep8-c3ca93531418">https://medium.com/&#64;mariasurmenok/stylish-python-with-pep8-c3ca93531418</a></p>
</li>
<li><p>PEP-8 的陷阱</p>
<p><a class="reference external" href="https://medium.com/&#64;ian.reinert/the-pitfalls-of-pep-8-b6108b006ed9">https://medium.com/&#64;ian.reinert/the-pitfalls-of-pep-8-b6108b006ed9</a></p>
</li>
</ul>
<p>永远不要弄乱你的代码。要优雅而美丽。</p>
</section>
<section id="id2">
<h2>3. 明了胜于晦涩<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h2>
<p>在 Python
中，良好的命名约定不仅可以提升你的课堂成绩，而且还能让你的代码更明了。幸运的是，你能在
PEP8 中找到一些指导原则，我想在下面强调其中的一些要点。</p>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">https://www.python.org/dev/peps/pep-0008/</a></p>
<ul class="simple">
<li><p>一般来说，避免使用以下名称：</p></li>
<li><p>太宽泛，如<code class="docutils literal notranslate"><span class="pre">my_list</span></code>；</p></li>
<li><p>太冗长，如<code class="docutils literal notranslate"><span class="pre">list_of_machine_learning_data_set</span></code>；</p></li>
<li><p>太模糊，如“1”、“I”、“o”、“O”。</p></li>
<li><p>包 / 模块名应该全部小写：</p></li>
<li><p>首选使用一个单词命名；</p></li>
<li><p>当需要使用多个单词时，使用下划线分割它们。</p></li>
<li><p>类名应遵循 UpperCaseCamelCase 规范</p></li>
<li><p>变量:raw-latex:<cite>方法</cite>:raw-latex:<a href="#id3"><span class="problematic" id="id4">`</span></a>函数应该采用小写`（如果需要，用下划线分割）</p></li>
<li><p>常量名必须全大写（如果需要，用下划线分割）</p></li>
</ul>
<p>一切都必须清晰易懂。</p>
</section>
<section id="id5">
<h2>4. 简单胜于复杂<a class="headerlink" href="#id5" title="此标题的永久链接">¶</a></h2>
<blockquote>
<div><p>简单比复杂更难：你必须付出巨大艰辛，化繁为简。但这一切到最后都是值得的，因为一旦你做到了，你便能创造奇迹。——乔布斯</p>
</div></blockquote>
<p>很多时候，在处理迭代器时，我们还需要保存迭代计数。Python
通过提供一个名为<code class="docutils literal notranslate"><span class="pre">enumerate()</span></code>的内置函数简化这一任务。以下是一种不成熟的方法，然后是推荐方法：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Hannibal&#39;</span><span class="p">,</span> <span class="s1">&#39;Hanny&#39;</span><span class="p">,</span> <span class="s1">&#39;Steeve&#39;</span><span class="p">]</span>
<span class="c1"># 不成熟的方法</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># 推荐方法</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">words</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
<p>另一个示例是使用内置的<code class="docutils literal notranslate"><span class="pre">zip()</span></code>函数，该函数创建一个迭代器，对来自两个或多个迭代器的元素进行配对。你可以使用它来快速有效地解决常见的编程问题，比如创建字典。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">,</span> <span class="s1">&#39;chemistry&#39;</span><span class="p">,</span> <span class="s1">&#39;biology&#39;</span><span class="p">,</span> <span class="s1">&#39;pyhsics&#39;</span><span class="p">]</span>
<span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;100&#39;</span><span class="p">,</span> <span class="s1">&#39;83&#39;</span><span class="p">,</span> <span class="s1">&#39;90&#39;</span><span class="p">,</span> <span class="s1">&#39;92&#39;</span><span class="p">]</span>
<span class="n">grades_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span> <span class="n">grades</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grades_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>化繁为简的能力就是消除不必要的东西，保留必要的东西。</p>
</section>
<section id="id6">
<h2>5. 复杂胜于晦涩<a class="headerlink" href="#id6" title="此标题的永久链接">¶</a></h2>
<p>复杂（complex ）和晦涩（complicated
）的区别在于，复杂是指组件的系统层级，晦涩是指难度高。</p>
<p>有时候，尽管我们试图让任务变得简单和傻瓜化，结果可能仍然很糟。</p>
<p>在这种情况下，编程优化变得很有必要，我最喜欢的学习方法是完成 coding
challenge websites
上的工作。你可以查看其他人的解决方案，甚至能受到更好算法的启发。</p>
<p><a class="reference external" href="https://www.freecodecamp.org/news/the-10-most-popular-coding-challenge-websites-of-2016-fb8a5672d22f/">https://www.freecodecamp.org/news/the-10-most-popular-coding-challenge-websites-of-2016-fb8a5672d22f/</a></p>
<p>对于入门，HackerRank
提供了适合新手程序员的各种级别任务，这非常棒。之后，可以去尝试更专业的网站，比如
Coderbyte 和 Topcoder。</p>
</section>
<section id="id7">
<h2>6. 扁平胜于嵌套<a class="headerlink" href="#id7" title="此标题的永久链接">¶</a></h2>
<p>嵌套模块在 Python
中并不常见——至少我之前没有见过像<code class="docutils literal notranslate"><span class="pre">module.class.subclass.function</span></code>这样的东西——可读性不好。虽然在另一个子模块中构建子模块可能会减少代码行数，但我们不希望用户被不直观的语法所困扰。</p>
</section>
<section id="id8">
<h2>7. 间隔胜于紧凑<a class="headerlink" href="#id8" title="此标题的永久链接">¶</a></h2>
<p>不要在一行中插入太多代码，这会给读者带来压力。建议最大行长度 79
个字符。这样，当使用代码评审工具时，编辑器窗口宽度限制才能很好工作。</p>
<img alt="https://image.iswbm.com/20221211103823.png" src="https://image.iswbm.com/20221211103823.png" />
<p>使用 Python 从 Unsplash 下载图片</p>
</section>
<section id="id9">
<h2>8. 可读性很重要<a class="headerlink" href="#id9" title="此标题的永久链接">¶</a></h2>
<p>代码的阅读次数比编写次数多。考虑下缩进，它让代码更容易阅读，比较下面的代码：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">10000000</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I earn&quot;</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span> <span class="s2">&quot;dollars by writing on medium.&quot;</span><span class="p">)</span>

<span class="n">money</span> <span class="o">=</span> <span class="mi">10_000_000</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;I earn </span><span class="si">{</span><span class="n">money</span><span class="si">}</span><span class="s2"> dollars by writing on medium.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>在本例中，代码结果相同，但是后一段代码通过使用下划线占位符和 f-string
提供了更好的可读性。在 Python 3.6 发布后，f-string
开始让格式化变得更简单，并且在处理包含更多变量的更长的句子时更强大。</p>
<blockquote>
<div><p>一个作家的风格不应该在他的思想和读者的思想间设置障碍。</p>
</div></blockquote>
</section>
<section id="id10">
<h2>9. 特例不足以特殊到违背这些原则<a class="headerlink" href="#id10" title="此标题的永久链接">¶</a></h2>
<p>关键是为一般情况提供一贯支持，尝试将一个繁琐的项目重新组织成一个简单形式。例如，根据其功能，结构化类的代码或将其分类到不同的文件中，即使
Python 并不强迫你这样做。由于 Python
是一种多范式编程语言，解决问题的一个强大方法是创建对象，这就是所谓的面向对象编程。</p>
<p>面向对象编程是一种组织程序结构的编程范式，让属性和行为可以被看作是单独对象。它的优点是直观和易于操作，许多教程都很好地解释了这些概念。</p>
</section>
<section id="id11">
<h2>10. 实用性胜过纯粹<a class="headerlink" href="#id11" title="此标题的永久链接">¶</a></h2>
<p>这句格言与前一句相矛盾，它提醒我们保持它们之间的平衡</p>
</section>
<section id="id12">
<h2>11. 永远不要默默地忽视错误<a class="headerlink" href="#id12" title="此标题的永久链接">¶</a></h2>
<p>放过错误最终会留下隐式 Bug，并且这些 Bug 更难被发现。Python
提供了健壮的错误处理，与其他语言相比，程序员使用该工具并不难。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter an Integer: &quot;</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops! This is not an Integer.&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You did it! Great job!&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ヽ(✿ﾟ▽ﾟ)ノ&#39;</span><span class="p">)</span>

<span class="c1"># 1. 这段代码可能中断。</span>
<span class="c1"># 2. 如果出现值错误就会触发。</span>
<span class="c1"># 3. 处理值错误之外的错误。</span>
<span class="c1"># 4. 如果没有触发错误就执行。</span>
<span class="c1"># 5. 不管是否触发错误都执行。</span>
</pre></div>
</div>
<p>根据 Python
文档：“即使一个语句或表达式在语法上是正确的，在试图执行它时也可能会导致错误。”特别是对于大型项目，我们不希望在耗时的计算后，代码崩溃。这就是异常管理的魅力所在。</p>
</section>
<section id="id13">
<h2>12. 除非明确需要这样做<a class="headerlink" href="#id13" title="此标题的永久链接">¶</a></h2>
<p>在某些情况下，小错误不会困扰你。不过，也许你想捕获特定错误。要获得关于特定错误消息的更多细节，我建议阅读官方的内置异常文档并找到你需要的内容。</p>
<p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html">https://docs.python.org/3/library/exceptions.html</a></p>
</section>
<section id="id14">
<h2>13. 面对模棱两可，拒绝猜测<a class="headerlink" href="#id14" title="此标题的永久链接">¶</a></h2>
<blockquote>
<div><p>重要的是要不断学习，享受挑战，容忍歧义。我们都不知道最终会怎样。——玛蒂娜·霍纳</p>
</div></blockquote>
<p>这句话优雅而抒情，但在编程中不是一个好的隐喻。歧义可能是指不清楚的语法、复杂的程序结构或触发错误消息的错误。例如，第一次使用<code class="docutils literal notranslate"><span class="pre">numpy</span></code>模块时的一个简单错误：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;smaller than 3&#39;</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>ValueError: 具有多个元素的数组的真值不明确，请使用 a.any() 或 a.all()</p>
</div></blockquote>
<p>如果执行上面代码，你将在输出中发现一个由 5 个布尔值组成的数组，表明值在
3
以下。因此，<code class="docutils literal notranslate"><span class="pre">if</span></code>语句不可能确定状态。消息中显示的内置函数<code class="docutils literal notranslate"><span class="pre">.all</span></code>()
和<code class="docutils literal notranslate"><span class="pre">.any()</span></code>用于代替 And/Or。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>
</pre></div>
</div>
<p>输出表明，<code class="docutils literal notranslate"><span class="pre">.all()</span></code>仅在所有项都为<code class="docutils literal notranslate"><span class="pre">True</span></code>时才返回<code class="docutils literal notranslate"><span class="pre">True</span></code>，而.<code class="docutils literal notranslate"><span class="pre">any()</span></code>在有一项为<code class="docutils literal notranslate"><span class="pre">True</span></code>时就返回<code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
</section>
<section id="id15">
<h2>14. 解决问题最直接的方法应该有一种，最好只有一种<a class="headerlink" href="#id15" title="此标题的永久链接">¶</a></h2>
<p>想想为什么 Python 被描述为一种易于学习的编程语言。Python
具有非凡的内置函数 /
库和高度的可扩展性，它鼓励程序员优雅地编写代码。尽管有更多的解决方案可以提供灵活性，但对于同一个问题，它们可能会花费更多时间。</p>
<img alt="https://image.iswbm.com/20221211103910.png" src="https://image.iswbm.com/20221211103910.png" />
<p>输入 import antigravity 并执行</p>
</section>
<section id="id16">
<h2>15. 当然这是没法一蹴而就的，除非你是荷兰人<a class="headerlink" href="#id16" title="此标题的永久链接">¶</a></h2>
<p>Python 之父 Guido van Rossum
是一位荷兰程序员，他让这句格言变得无可争议。你不会声称自己比他更了解
Python……至少我不会。</p>
</section>
<section id="id17">
<h2>16. 做也许好过不做<a class="headerlink" href="#id17" title="此标题的永久链接">¶</a></h2>
<blockquote>
<div><p>你可以拖延，但时间不会，失去的时间一去不复返。——本杰明·富兰克林</p>
</div></blockquote>
<p>对于那些像我一样患有拖延症，正在寻求改变的人，看看这个，和恐慌怪兽合作。</p>
<p><a class="reference external" href="https://embed.ted.com/talks/tim_urban_inside_the_mind_of_a_master_procrastinator">https://embed.ted.com/talks/tim_urban_inside_the_mind_of_a_master_procrastinator</a></p>
<p>另一方面，这个格言的另一个方面是阻止你过度计划，这并不比看 Netflix
更有效率。</p>
<p>拖延和过度计划的共同特征就是“什么都做不了。”</p>
</section>
<section id="id18">
<h2>17. 不想就做还不如不做<a class="headerlink" href="#id18" title="此标题的永久链接">¶</a></h2>
<p>“做也许好过不做”并不意味着计划没用。把你的想法写下来，设定一个要征服的目标，比不想就做要好。</p>
<p>例如，我通常在每个星期天花一个小时来制定我的周计划，并在睡觉前更新我明天的计划，看看有什么需要推迟的事情。</p>
</section>
<section id="id19">
<h2>18. 如果解决方案难以解释清楚，那一定很糟糕<a class="headerlink" href="#id19" title="此标题的永久链接">¶</a></h2>
<p>回想一下“复杂胜于晦涩”的理念。通常，晦涩的代码意味着弱设计，特别是在像
Python 这样的高级编程语言中。</p>
<p>然而，在某些情况下，其领域知识的复杂性可能会让实现难以解释，而如何优化让其明晰易懂至关重要。这里有一个规划项目指南，可以给你提供帮助。</p>
<p><a class="reference external" href="https://docs.python-guide.org/writing/structure/">https://docs.python-guide.org/writing/structure/</a></p>
</section>
<section id="id20">
<h2>19. 如果实现容易描述，那可能是个好方案<a class="headerlink" href="#id20" title="此标题的永久链接">¶</a></h2>
<p>使设计（甚至人们的生活）更容易，即使背景知识可能很深刻，这是编程的专业知识，我认为也是编程中最困难的部分。</p>
<p>利用 Python 的简单性和可读性来实现一些疯狂的想法。</p>
</section>
<section id="id21">
<h2>20. 命名空间是一种绝妙的理念，多加利用！<a class="headerlink" href="#id21" title="此标题的永久链接">¶</a></h2>
<p>最后但同样重要的是，命名空间是一组符号，用于组织各种对象，以便这些对象可以通过惟一的名称引用。在
Python 中，命名空间是由以下元素组成的系统：</p>
<ol class="arabic simple">
<li><p>内置命名空间：可以在不创建自定义函数或导入模块（如<code class="docutils literal notranslate"><span class="pre">print()</span></code>函数）的情况下调用。</p></li>
<li><p>全局命名空间：当用户创建一个类或函数时，将创建一个全局命名空间。</p></li>
<li><p>局部命名空间：局部作用域中的命名空间。</p></li>
</ol>
<p><img alt="image1" src="https://image.iswbm.com/20221211103952.png" /> 命名空间关系图</p>
<p>命名空间系统可以防止 Python 模块名称之间产生冲突。</p>
<p>延展阅读：</p>
<p><a class="reference external" href="https://medium.com/better-programming/how-to-make-python-programming-more-elegant-and-decent-4b5962695aa9">https://medium.com/better-programming/how-to-make-python-programming-more-elegant-and-decent-4b5962695aa9</a></p>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="c11_06.html" class="btn btn-neutral float-right" title="11.6 【代码美化】择优选择 EAFP 和 LBYL 代码风格" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="c11_04.html" class="btn btn-neutral float-left" title="11.4 【代码美化】Pythonic 代码的 15 个案例" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版权所有 2023, wb.

    </p>
  </div>
    
    
    
    利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    
    由 <a href="https://readthedocs.org">Read the Docs</a>开发. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>